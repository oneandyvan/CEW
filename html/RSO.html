<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>COP4710 | RSO Management</title>

	<!-- Bootstrap Imports -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<script type="text/javascript" src="js/code.js"></script>
	<link href="css/styles.css" rel="stylesheet">
	<link href="css/events.css" rel="stylesheet">

	<!-- Fonts/Icon Stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=DM+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<!--OpenStreetMap/Leaflet.js-->
	<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

	<!-- Load in the university info associated with the user -->
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function()
		{
			loadUserInfo();
			profilePerms(role);
			fetchRSOs('RSO', "user");
		}, false);
	</script>

</head>
<body>
	
	<header>
		<nav class="navbar navbar-expand-sm bg-light" id="nav">
			<div class="container-fluid">
				<!-- Pages -->
				<ul class="navbar-nav flex-row" >
					<li class="nav-item">
						<a href="info.html" class="navbar-brand" style="color: rgb(75, 12, 102);">
							<img src="images/logo.png" alt="Logo" style="width:45px;" class="rounded-pill">
							College Event Website
						</a>
					</li>
					<li class="nav-item px-2 perm-admin">
						<a href="RSO.html" class="navbar">
							RSOs
						</a>
					</li>
					<li class="nav-item px-2 perm-admin perm-user">
						<a href="RSO_Events.html" class="navbar">
							RSO Events
						</a>
					</li>
					<li class="nav-item px-2">
						<a href="Private_Events.html" class="navbar">
							Private Events
						</a>
					</li>
					<li class="nav-item px-2">
						<a href="Public_Events.html" class="navbar">
							Public Events
						</a>
					</li>
				</ul>
				<!-- First name and logout button -->
				<ul class="navbar-nav ms-auto">
					<li class="nav-item navbar-text">
						<span id="navUser" style="margin-right: 20px;">User (Role)</span>
					</li>
					<li class="nav-item">
						<button class="btn" type="button" id="logoutButton" onclick="doLogout();">
							<span class="material-symbols-outlined">logout</span>
							Log out
						</button>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<div id="accessUIDiv" class="justify-content-center" style="background-color: transparent;">
			<div class="container justify-content-center my-5" >

				<!-- CRUD Bar -->
				<div id="searchAddBar" class="uiNavBar d-flex bg-light perm-admin">
					<div class="uiBtn p-2 flex-grow-1 ms-3 my-1" style="text-align: start;">
						<button id="addRSOButton" type="button" class="btn" data-bs-toggle="modal" data-bs-target="#addRSO" onclick="prepareAddRSO()">
							Add RSO
						</button>
					</div>
				</div>

				<!-- Card List -->
				<div class="container mt-4">
					<div class="row" id="rsoList">
						<!-- Cards will be appended here dynamically using JavaScript -->
					</div>
				</div>


				<!-- Add RSO modal -->
				<div class="modal fade" id="addRSO" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							
							<div class="modal-header">
								<h5 class="modal-title">Add RSO</h5>
								<button type="button" class="btn-close" aria-label="Close" aria-hidden="true" onclick="closeModalForm('addRSO');">
								</button>
							</div>

							<div class="modal-body">
								<form id="addRSOForm">
									<div class="mb-3">
										<label for="addRSOName" class="form-label">RSO Name</label>
										<input id="addRSOName" class="form-control" type="text" placeholder="ex. Hacking Club">
									</div>
									<div class="mb-3">
										<label for="addRSODescription" class="form-label">Description</label>
										<textarea id="addRSODescription" class="form-control" rows="3" placeholder="Describe your RSO..."></textarea>
									</div>
									<div class="mb-3">
										<label for="addRSOUniversity" class="form-label">University</label>
										<input id="addRSOUniversity" class="form-control" type="text" readonly disabled>
									</div>
									<div class="mb-3">
										<label for="addRSOAdminEmail" class="form-label">RSO Admin Email</label>
										<input id="addRSOAdminEmail" class="form-control" type="email" readonly disabled>
									</div>
									<div class="mb-3">
										<label for="addRSOMembers" class="form-label">Additional Member Emails</label>
										<textarea id="addRSOMembers" class="form-control" rows="3" placeholder="Separate additional emails by commas"></textarea>
									</div>
									<div class="feedback">
										Note: 5 members (including admin) required for RSO to be active.
									</div>
									<div id="sameDomainFeedback" class="feedback text-danger" style="visibility: hidden;">
										Must use the same university domain!
									</div>
								</form>
							</div>

							<div class="modal-footer d-flex justify-content-between">
								<button id="addCancel" type="button" class="btn modalCancel float-start" onclick="closeModalForm('addRSO');">
									Cancel
								</button>
								<!-- todo clean this up -->
								<button type="submit" class="btn modalSubmit" onclick="addRSO()">
									Submit
								</button>
							</div>

						</div>
					</div>
				</div>

				<!-- Edit RSO modal -->
				<div class="modal fade" id="editRSO" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							
							<div class="modal-header">
								<h5 class="modal-title">Edit RSO Members</h5>
								<button type="button" class="btn-close" aria-label="Close" aria-hidden="true" onclick="closeModalForm('editRSO');">
								</button>
							</div>

							<div class="modal-body">
								<form id="editRSOForm">
									<div class="mb-3">
										<label for="editRSOAdminEmail" class="form-label">RSO Admin Email</label>
										<input id="editRSOAdminEmail" class="form-control" type="email" readonly disabled>
									</div>
									<div class="mb-3">
										<label class="form-label">Current Members</label>
										<div id="editRSOMemberList">

										</div>
									</div>
									<div class="mb-3">
										<label for="editRSOInput" class="form-label">Input Email</label>
										<input id="editRSOInput" class="form-control">
									</div>
									<div class="mb-3">
										<button id="addUserButton" type="button" class="btn modalCancel float-center">
											Add User
										</button>
										<button id="deleteUserButton" type="button" class="btn modalCancel float-center">
											Delete User
										</button>
									</div>
								</form>

							</div>

						</div>
					</div>
				</div>

			</div>
		</div>
		
	</main>


</body>
</html>
