<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>COP4710 | University Info</title>

	<!-- Bootstrap Imports -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<script type="text/javascript" src="js/code.js"></script>
	<link href="css/styles.css" rel="stylesheet">
	<link href="css/events.css" rel="stylesheet">

	<!-- Fonts/Icon Stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=DM+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<!--OpenStreetMap/Leaflet.js-->
	<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

	<!-- Load in the university info associated with the user -->
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function()
		{
			loadUserInfo();
			getUniversity(universityName);
			profilePerms(role);
		}, false);
	</script>

</head>
<body>
	
	<header>
		<nav class="navbar navbar-expand-sm bg-light" id="nav">
			<div class="container-fluid">
				<!-- Pages -->
				<ul class="navbar-nav flex-row" >
					<li class="nav-item">
						<a href="info.html" class="navbar-brand" style="color: rgb(75, 12, 102);">
							<img src="images/logo.png" alt="Logo" style="width:45px;" class="rounded-pill">
							College Event Website
						</a>
					</li>
					<li class="nav-item px-2 perm-admin">
						<a href="RSO.html" class="navbar">
							RSOs
						</a>
					</li>
					<li class="nav-item px-2 perm-admin perm-user">
						<a href="RSO_Events.html" class="navbar">
							RSO Events
						</a>
					</li>
					<li class="nav-item px-2">
						<a href="Private_Events.html" class="navbar">
							Private Events
						</a>
					</li>
					<li class="nav-item px-2">
						<a href="Public_Events.html" class="navbar">
							Public Events
						</a>
					</li>
				</ul>
				<!-- First name and logout button -->
				<ul class="navbar-nav ms-auto">
					<li class="nav-item navbar-text">
						<span id="navUser" style="margin-right: 20px;">User (Role)</span>
					</li>
					<li class="nav-item">
						<button class="btn" type="button" id="logoutButton" onclick="doLogout();">
							<span class="material-symbols-outlined">logout</span>
							Log out
						</button>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<div id="accessUIDiv" class="justify-content-center" style="background-color: transparent;">
			<div class="container justify-content-center my-5" >

				<!-- CRUD Bar -->
				<div id="searchAddBar" class="uiNavBar d-flex bg-light perm-superadmin">
					<div class="uiBtn p-2 flex-grow-1 ms-3 my-1" style="text-align: start;">
						<button id="editProfileButton" type="button" class="btn" data-bs-toggle="modal" data-bs-target="#editProfile" onclick="prepareEditProfile()">
							Edit Profile
						</button>
					</div>
					<div class="uiBtn p-2 me-3 my-1">
						<button id="addLocationButton" type="button" class="btn rounded-left" data-bs-toggle="modal" data-bs-target="#addLocation" onclick="addLocation()">
							+ Add Location
						</button>
					</div>
				</div>

				<!--University Profile-->
				<div id="universityProfile" class="card p-3 mt-4">
					
					<div>
						<h1 id="profileUniversityName">University Name</h1>
						<h3><span id="profileNumStudents">Number</span> Students</h3>
						Domain: <span id="profileDomain" style="font-style: italic;">something.edu</span>
					</div>
					<div id="profileDescription" class="mt-1 p-1">
						We are the coolest school ever!
					</div>

					<div id="profileLocation" class="card mt-4 p-3">
						<h4>Location</h4>
						<div id ="profileLocationName" style="font-size: 1.2em;">
							Location Name
						</div>
						<span><span id ="profileLocationLongitude">longitude</span>°</span>
						<span><span id ="profileLocationLatitude">latitude</span>°</span>
						<div id="profileMap" style="height: 300px; width: 100%; margin-top: 1rem;"></div>
					</div>

				</div>

				<!-- Edit University Profile modal -->
				<div class="modal fade" id="editProfile" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							
							<div class="modal-header">
								<h5 class="modal-title">Edit University Details</h5>
								<button type="button" class="btn-close" aria-label="Close" aria-hidden="true" onclick="closeModalForm('editProfile');">
								</button>
							</div>

							<div class="modal-body">
								<form id="editProfileForm">
									<div class="mb-3">
										<label for="editProfileNum" class="form-label">Number of Students</label>
										<input id="editProfileNum" class="form-control" type="text" placeholder="ex. 15000">
									</div>
									<div class="mb-3">
										<label for="editProfileDomain" class="form-label">University Email Domain</label>
										<input id="editProfileDomain" class="form-control" type="email" placeholder="ex. ucf.edu">
									</div>
									<div class="mb-3">
										<label for="editProfileDescription" class="form-label">Description</label>
										<textarea id="editProfileDescription" class="form-control" rows="3"></textarea>
									</div>
									<div class="mb-3">
										<label for="LocationOptions" class="form-label">Choose Existing Location</label>
										<select name="LocationOptions" class="form-control" id="editProfileLocation" placeholder="Location" required></select>
									</div>
								</form>
							</div>

							<div class="modal-footer d-flex justify-content-between">
								<button id="addCancel" type="button" class="btn modalCancel float-start" onclick="closeModalForm('editProfile');">
									Cancel
								</button>
								<!-- todo clean this up -->
								<button type="submit" class="btn modalSubmit" onclick="updateProfile();">
									Submit
								</button>
							</div>

						</div>
					</div>
				</div>

				<!-- Add Location modal -->
				<div class="modal fade" id="addLocation" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							
							<div class="modal-header">
								<h5 class="modal-title">Add New Location</h5>
								<button type="button" class="btn-close" aria-label="Close" aria-hidden="true" onclick="closeModalForm('addLocation');">
								</button>
							</div>

							<div class="modal-body">
								<form id="addLocationForm">
									<div class="mb-3">
										<label for="addLocationName" class="form-label">Location Name</label>
											<input id="addLocationName" class="form-control" type="text" placeholder="ex. UCF CB1, Room 103">
										<div id="addLocationMap" style="height: 300px; width: 100%; margin-top: 1rem;"></div>
										<div class="mt-2">
											<label for="addLocationLongitude" class="form-label">Longitude</label>
												<input id="addLocationLongitude" class="form-control" type="text">
											<label for="addLocationLatitude" class="form-label">Latitude</label>
												<input id="addLocationLatitude" class="form-control" type="text">
										</div>
									</div>
								</form>
							</div>

							<div class="modal-footer d-flex justify-content-between">
								<button id="addCancel" type="button" class="btn modalCancel float-start" onclick="closeModalForm('addLocation');">
									Cancel
								</button>
								<!-- todo clean this up -->
								<button type="submit" class="btn modalSubmit" onclick="addLocationSubmit();">
									Submit
								</button>
							</div>

						</div>
					</div>
				</div>

			</div>
		</div>
		
	</main>


</body>
</html>
